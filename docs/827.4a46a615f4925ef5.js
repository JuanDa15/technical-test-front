"use strict";(self.webpackChunktechnical_test_front=self.webpackChunktechnical_test_front||[]).push([[827,516],{8827:(f,p,a)=>{a.r(p),a.d(p,{AuthModule:()=>E});var d=a(6814),m=a(3057),t=a(4946),o=a(95),i=a(5516),c=a(9862);let l=(()=>{class e{constructor(n){this._http=n,this._url=`${i.N.API}api/agents`}registerAgent(n){return this._http.post(this._url,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(c.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const P=(e,s)=>n=>{const r=n.get(e)?.value,u=n.get(s)?.value;return r===u||n.get(s)?.setErrors({passwordNotMatch:!0}),null};var h=a(4942),w=a(2331),C=a(868),M=a(9098),y=a(7332);function O(e,s){1&e&&t.GkF(0)}function A(e,s){if(1&e&&(t.TgZ(0,"p",9),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.hij(" ",n.formHelper.getControlErrors(n.controlInstance)," ")}}function I(e,s){1&e&&(t.O4$(),t.TgZ(0,"svg",10),t._UZ(1,"path",11)(2,"path",12),t.qZA())}function x(e,s){1&e&&(t.O4$(),t.TgZ(0,"svg",10),t._UZ(1,"path",13),t.qZA())}let b=(()=>{class e{constructor(n,r,u){this.formHelper=n,this._fb=r,this._destroyRef=u,this.onChange=g=>g,this.onTouch=()=>{},this.onValidatorChange=()=>{},this.id="",this.label="",this._subscriptions=[],this.controlInstance=null,this.showPassword=(0,t.tdS)(!1),this.form=this._initializeForm(),this._subscribeToValueChanges(),this._destroyRef.onDestroy(()=>{this._subscriptions.forEach(g=>g.unsubscribe())})}writeValue(n=""){null!==n&&(this.form.setValue(n),this.onChange(n))}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouch=n}setDisabledState(n){n?this.form.disable():this.form.enable()}validate(n){return this.controlInstance=n,null}registerOnValidatorChange(n){this.onValidatorChange=n}_initializeForm(){return this._fb.control(null,{updateOn:"change"})}_subscribeToValueChanges(){const n=this.form.valueChanges.subscribe({next:r=>{null!==r&&(this.onValidatorChange(),this.onTouch(),this.onChange(r))}});this._subscriptions.push(n)}markAsTouch(){this.controlInstance?.markAsDirty(),this.onTouch(),this.onValidatorChange()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(M.k),t.Y36(o.qu),t.Y36(t.ktI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["c-password-input"]],inputs:{id:"id",label:"label",name:"name"},features:[t._Bn([{provide:o.JU,useExisting:(0,t.Gpc)(()=>e),multi:!0},{provide:o.Cf,useExisting:(0,t.Gpc)(()=>e),multi:!0}])],decls:12,vars:12,consts:[[1,"input-container","input-with-button"],[1,"input-label"],[1,"container"],["autocomplete","off","NoWhiteSpaces","",1,"input",3,"type","formControl","name","blur"],["type","button",1,"input-action-btn",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["class","input-error",4,"ngIf"],["eye",""],["eyeslash",""],[1,"input-error"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","width","24","height","24"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","d","M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0)(1,"label",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"input",3),t.NdJ("blur",function(){return r.markAsTouch()}),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return r.showPassword.set(!r.showPassword())}),t.YNc(6,O,1,0,"ng-container",5),t.qZA()(),t.YNc(7,A,2,1,"p",6),t.qZA(),t.YNc(8,I,3,0,"ng-template",null,7,t.W1O),t.YNc(10,x,2,0,"ng-template",null,8,t.W1O)),2&n){const u=t.MAs(9),g=t.MAs(11);t.ekj("error",null!==r.controlInstance&&r.formHelper.checkControlErrors(r.controlInstance)),t.xp6(1),t.uIk("for",r.id?r.id:null),t.xp6(1),t.hij(" ",r.label," "),t.xp6(2),t.s9C("name",r.name?r.name:null),t.Q6J("type",r.showPassword()?"text":"password")("formControl",r.form),t.uIk("id",r.id?r.id:null),t.xp6(2),t.Q6J("ngIf",r.showPassword())("ngIfThen",g)("ngIfElse",u),t.xp6(1),t.Q6J("ngIf",null!==r.controlInstance&&r.formHelper.checkControlErrors(r.controlInstance))}},dependencies:[d.O5,o.Fj,o.JJ,o.oH,y.q],styles:[".input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-container[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:.9rem}.input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background:var(--bg);border:none;padding:.4rem .6rem;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:1px solid var(--primary);color:var(--text);border-radius:.3rem;transition:border .3s ease}.input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus{outline:none;border-radius:.3rem;border:1px solid var(--primary)}.input-container.error[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{color:var(--error)}.input-container.error[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border:1px solid var(--error)}.input-container.error[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{font-size:.9rem;color:var(--error)}.input-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom-right-radius:0;border-top-right-radius:0}.container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus{border:none;border-bottom:1px solid var(--primary);border-bottom-right-radius:0}.container[_ngcontent-%COMP%]   .input-action-btn[_ngcontent-%COMP%]{background-color:var(--bg);border:none;padding:.3rem .5rem;border-bottom:1px solid var(--primary);color:var(--primary)}.input-container.error[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border-right:none;border-bottom-right-radius:0;border-top-right-radius:0}.input-container.error[_ngcontent-%COMP%]   .input-action-btn[_ngcontent-%COMP%]{border:1px solid var(--error);border-left:none;border-bottom-right-radius:.3rem;border-top-right-radius:.3rem}"]}),e})(),T=(()=>{class e{constructor(){this.fb=(0,t.f3M)(o.qu),this.router=(0,t.f3M)(m.F0),this.registerService=(0,t.f3M)(l),this.notifications=(0,t.f3M)(h.g),this.form=this.fb.group({name:["",o.kI.required],lastName:["",o.kI.required],email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required,e=>new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[A-Za-z\\d$@$!%*?&_]{7,10}").test(e.value)?null:{invalidPasswordFormat:!0}]],confirmPassword:["",[o.kI.required]]},{validators:[P("password","confirm_password")]})}save(){if(this.form.invalid)return void this.form.markAllAsTouched();const n=structuredClone(this.form.value);delete n.confirmPassword,this.registerService.registerAgent(n).subscribe({next:()=>{this.notifications.create({severity:"success",summary:"Usuario registrado correctamente"}),this.router.navigate(["/auth/login"],{queryParams:{email:n.email}})}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register-agent"]],decls:14,vars:1,consts:[[1,"content-container"],[1,"form-wrapper"],[1,"img-wrapper"],["src","assets/img/auth.svg","width","350","alt","illustration"],[3,"formGroup","ngSubmit"],["label","Nombre*","formControlName","name","name","name"],["label","Apellidos*","formControlName","lastName","name","lastName"],["label","Correo electr\xf3nico*","formControlName","email","name","email"],["label","Contrase\xf1a*","formControlName","password","name","password"],["label","Confirmar contrase\xf1a*","formControlName","confirmPassword","name","confirmPassword"],["type","submit",1,"primary-button"]],template:function(n,r){1&n&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"Registrarse como agente"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t._UZ(5,"img",3),t.qZA(),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return r.save()}),t._UZ(7,"c-input",5)(8,"c-input",6)(9,"c-email-input",7)(10,"c-password-input",8)(11,"c-password-input",9),t.TgZ(12,"button",10),t._uU(13," Crear agente "),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("formGroup",r.form))},dependencies:[o._Y,o.JJ,o.JL,o.sg,o.u,w.D,C.G,b],styles:["h1[_ngcontent-%COMP%]{text-align:center;text-wrap:balance;font-size:1.8rem}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-top:1.5rem}.form-wrapper[_ngcontent-%COMP%]{margin-top:3rem;display:flex;flex-direction:column;gap:1rem}@media (min-width: 800px){.form-wrapper[_ngcontent-%COMP%]{flex-direction:row}}.form-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{background-color:#9e9e9e;padding:1rem;border-radius:.5rem;display:none}@media (min-width: 800px){.form-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{display:block}}form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,350px);gap:1rem}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem}"]}),e})();var k=a(9397),Z=a(9610);let N=(()=>{class e{constructor(n,r){this._http=n,this._session=r,this._URL=`${i.N.API}api/auth`}logIn(n){return this._http.post(this._URL,n).pipe((0,k.b)(({data:r,token:u=""})=>{this._session.sessionData=r,this._session.token=u}))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(c.eN),t.LFG(Z.m))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const F=[{path:"register-agent",component:T},{path:"login",component:(()=>{class e{constructor(){this.fb=(0,t.f3M)(o.qu),this.ar=(0,t.f3M)(m.gz),this.router=(0,t.f3M)(m.F0),this.notifications=(0,t.f3M)(h.g),this.loginService=(0,t.f3M)(N),this.form=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",[o.kI.required]]})}ngOnInit(){const{email:n}=this.ar.snapshot.queryParams;n&&this.form.patchValue({email:n})}logIn(){if(this.form.invalid)return void this.form.markAllAsTouched();const n=structuredClone(this.form.value);this.loginService.logIn(n).subscribe({next:r=>{this.notifications.create({severity:"success",summary:`Bienvenido de nuevo ${r.data.name} ${r.data.lastName}`,sticky:!1,life:3e3}),this.router.navigateByUrl("/priv/panel")}})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:11,vars:1,consts:[[1,"content-container"],[1,"form-wrapper"],[1,"img-wrapper"],["src","assets/img/login.svg","width","350","alt","illustration"],[3,"formGroup","ngSubmit"],["label","Correo electr\xf3nico*","formControlName","email","name","email"],["label","Contrase\xf1a*","formControlName","password","name","password"],["type","submit",1,"primary-button"]],template:function(n,r){1&n&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"Iniciar sesi\xf3n"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t._UZ(5,"img",3),t.qZA(),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return r.logIn()}),t._UZ(7,"c-email-input",5)(8,"c-password-input",6),t.TgZ(9,"button",7),t._uU(10," Iniciar sesi\xf3n "),t.qZA()()()()),2&n&&(t.xp6(6),t.Q6J("formGroup",r.form))},dependencies:[o._Y,o.JJ,o.JL,o.sg,o.u,C.G,b],styles:["h1[_ngcontent-%COMP%]{text-align:center;text-wrap:balance;font-size:1.8rem}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-top:1.5rem}.form-wrapper[_ngcontent-%COMP%]{margin-top:3rem;display:flex;flex-direction:column;gap:1rem}@media (min-width: 800px){.form-wrapper[_ngcontent-%COMP%]{flex-direction:row}}.form-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{background-color:#9e9e9e;padding:1rem;border-radius:.5rem;display:none}@media (min-width: 800px){.form-wrapper[_ngcontent-%COMP%]   .img-wrapper[_ngcontent-%COMP%]{display:block}}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem}form[_ngcontent-%COMP%]   c-email-input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   c-password-input[_ngcontent-%COMP%]{width:350px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1.5rem}"]}),e})()},{path:"**",redirectTo:"login"}];let L=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(F),m.Bz]}),e})();var S=a(8524);let E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,L,o.UX,S.m]}),e})()},9098:(f,p,a)=>{a.d(p,{k:()=>m});var d=a(4946);let m=(()=>{class t{checkFormErrors(i,c){const l=i.get(c);return l?.touched&&l.invalid}getFormErrors(i,c){const l=i.get(c)?.errors;return this._errorsDicc(l)}checkControlErrors(i){return i.invalid&&i.touched}getControlErrors(i){return this._errorsDicc(i.errors)}_errorsDicc(i){if(i?.required)return"Este campo es requerido";if(i?.email)return"No cumple con un formato de correo v\xe1lido";if(i?.maxlength){const{requiredLength:c,actualLength:l}=i.maxlength;return`Longitud m\xe1xima permitida ${c}, longitud actual ${l}`}if(i?.minlength){const{requiredLength:c,actualLength:l}=i.minlength;return`Longitud m\xednima permitida ${c}, longitud actual ${l}`}if(i?.invalidPasswordFormat)return"No cumple con el formato requerido: al menos una letra may\xfascula, al menos una letra min\xfascula, al menos un d\xedgito, sin espacios en blanco, m\xednimo 7 caracteres y m\xe1ximo 10.";if(i?.passwordNotMatch)return"Las contrase\xf1as no coinciden";if(i?.pattern)return"No cumple con el formato requerido";if(i?.max){const{actual:c,max:l}=i.max;return`El valor m\xe1ximo permitido es ${l}, valor actual ${c}`}if(i?.min){const{actual:c,min:l}=i.min;return`El valor m\xednimo permitido es ${l}, valor actual ${c}`}return""}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5516:(f,p,a)=>{a.d(p,{N:()=>d});const d={API:"http://localhost:3000/"}}}]);