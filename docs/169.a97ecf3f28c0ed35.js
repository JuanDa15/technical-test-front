"use strict";(self.webpackChunktechnical_test_front=self.webpackChunktechnical_test_front||[]).push([[169,516],{7169:(b,C,l)=>{l.r(C),l.d(C,{ReservationModule:()=>R});var r=l(6814),d=l(3057),e=l(4946),i=l(95),s=l(5516),u=l(9862);let f=(()=>{class t{constructor(n){this._http=n,this._URL=`${s.N.API}api/reservations`}createReservation(n){return this._http.post(this._URL,n)}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(u.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=l(4942),h=l(2331),o=l(4929),a=l(1069),g=l(868),v=l(9768);function y(t,c){if(1&t&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&t){const n=c.$implicit;e.Q6J("value",n.key),e.xp6(1),e.hij(" ",n.value," ")}}function T(t,c){if(1&t&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&t){const n=c.$implicit;e.Q6J("value",n.key),e.xp6(1),e.hij(" ",n.value," ")}}function M(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(n);const _=e.oxw();return e.KtG(_.onRemove.emit())}),e.O4$(),e.TgZ(1,"svg",13),e._UZ(2,"path",14),e.qZA()()}}let O=(()=>{class t{constructor(){this.isFirst=!1,this.onRemove=new e.vpe,this.DOCUMENT_TYPES={cc:"C\xe9dula de ciudadan\xeda",ce:"C\xe9dula de extranjer\xeda",passport:"Pasaporte",nit:"NIT"},this.genreDicc={M:"Masculino",F:"Femenino",O:"Otro"}}castToFormGroup(n){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["traveler-form"]],inputs:{form:"form",isFirst:"isFirst"},outputs:{onRemove:"onRemove"},decls:14,vars:8,consts:[[1,"traveler-form",3,"formGroup"],[1,"grid"],["formControlName","name","label","Nombres*"],["formControlName","lastName","label","Apellidos*"],["label","Correo electr\xf3nico*","formControlName","email"],["formControlName","genre","label","G\xe9nero*"],[3,"value",4,"ngFor","ngForOf"],["formControlName","documentType","label","Tip\xf3 de documento*"],["formControlName","document","label","Documento"],["formControlName","phone","label","Tel\xe9fono"],["type","button","class","danger-button","style","margin-top: 1rem;",3,"click",4,"ngIf"],[3,"value"],["type","button",1,"danger-button",2,"margin-top","1rem",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","width","24"],["stroke-linecap","round","stroke-linejoin","round","d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"]],template:function(n,m){1&n&&(e.TgZ(0,"form",0)(1,"div",1),e._UZ(2,"c-input",2)(3,"c-input",3)(4,"c-email-input",4),e.TgZ(5,"c-select-input",5),e.YNc(6,y,2,2,"option",6),e.ALo(7,"keyvalue"),e.qZA(),e.TgZ(8,"c-select-input",7),e.YNc(9,T,2,2,"option",6),e.ALo(10,"keyvalue"),e.qZA(),e._UZ(11,"c-number-input",8)(12,"c-number-input",9),e.qZA(),e.YNc(13,M,3,0,"button",10),e.qZA()),2&n&&(e.Q6J("formGroup",m.castToFormGroup(m.form)),e.xp6(6),e.Q6J("ngForOf",e.lcZ(7,4,m.genreDicc)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(10,6,m.DOCUMENT_TYPES)),e.xp6(4),e.Q6J("ngIf",!m.isFirst))},dependencies:[r.sg,r.O5,i._Y,i.YN,i.Kr,i.JJ,i.JL,i.sg,i.u,h.D,g.G,o.c,v.p,r.Nd],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1rem}.traveler-form[_ngcontent-%COMP%]{padding:1rem;border:1px solid #37474F;border-radius:.5rem}.emergency[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;border:1px solid #37474F;border-radius:.5rem}.emergency[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),t})();function k(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"traveler-form",12),e.NdJ("onRemove",function(){const w=e.CHM(n).index,E=e.oxw();return e.KtG(E.travelersArr.removeAt(w))}),e.qZA()()}if(2&t){const n=c.$implicit,m=c.first;e.xp6(1),e.Q6J("form",n)("isFirst",m)}}let F=(()=>{class t{constructor(){this.ar=(0,e.f3M)(d.gz),this.fb=(0,e.f3M)(i.qu),this.router=(0,e.f3M)(d.F0),this.reservationService=(0,e.f3M)(f),this.notifications=(0,e.f3M)(p.g),this.form=this.fb.group({startDate:["",i.kI.required],endDate:["",i.kI.required],travelers:this.fb.array([]),hotel:["",i.kI.required],room:["",i.kI.required],emergencyContact:this.fb.group({name:["",i.kI.required],phone:["",i.kI.required]})})}get travelersArr(){return this.form.get("travelers")}ngOnInit(){const{hotelId:n,roomId:m}=this.ar.snapshot.params;this.form.patchValue({hotel:n,room:m}),this.createTravelerForm()}createTravelerForm(){this.travelersArr.push(this.fb.group({name:["",i.kI.required],lastName:["",i.kI.required],email:["",i.kI.required],genre:["",i.kI.required],documentType:["",i.kI.required],document:["",i.kI.required],phone:["",i.kI.required]}))}save(){this.reservationService.createReservation(this.form.value).subscribe({next:()=>{this.notifications.create({severity:"success",summary:"Reserva creada",detail:"En unos minutos te llegara un correo con la informacion de tu reserva"}),this.router.navigate(["/"])}})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create"]],decls:21,vars:2,consts:[[1,"content-container"],[1,"main-form",3,"formGroup","ngSubmit"],[1,"grid"],["type","date","formControlName","startDate","label","Desde*"],["type","date","formControlName","endDate","label","Hasta*"],["formGroupName","emergencyContact",1,"emergency"],["formControlName","name","label","Nombre*"],["formControlName","phone","label","Tel\xe9fono"],["formArrayName","travelers",1,"travelers"],["type","button",1,"primary-button",3,"click"],[4,"ngFor","ngForOf"],["type","submit",1,"primary-button"],[3,"form","isFirst","onRemove"]],template:function(n,m){1&n&&(e.TgZ(0,"section",0)(1,"h1"),e._uU(2,"Realizar reserva"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return m.save()}),e.TgZ(4,"div",2),e._UZ(5,"c-date-input",3)(6,"c-date-input",4),e.qZA(),e.TgZ(7,"form",5)(8,"h4"),e._uU(9,"Contacto de emergencia"),e.qZA(),e.TgZ(10,"div",2),e._UZ(11,"c-input",6)(12,"c-number-input",7),e.qZA()(),e.TgZ(13,"div",8)(14,"h3"),e._uU(15," Pasajeros "),e.TgZ(16,"button",9),e.NdJ("click",function(){return m.createTravelerForm()}),e._uU(17," Agregar pasajero "),e.qZA()(),e.YNc(18,k,2,2,"div",10),e.qZA(),e.TgZ(19,"button",11),e._uU(20,"Reservar"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("formGroup",m.form),e.xp6(15),e.Q6J("ngForOf",m.travelersArr.controls))},dependencies:[r.sg,i._Y,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,h.D,o.c,a.y,O],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1rem}.main-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:2rem}.travelers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.travelers[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.5rem;margin-bottom:2rem}.emergency[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;border:1px solid #37474F;border-radius:.5rem}.emergency[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),t})();var N=l(7398);let Z=(()=>{class t{get reservations(){return this._reservations.asReadonly()}constructor(n){this._http=n,this._URL=`${s.N.API}api/reservations/byEmail`,this._reservations=(0,e.tdS)([])}checkReservation(n){return this._http.get(this._URL,{params:n}).pipe((0,N.U)(m=>(this._reservations.set(m.data),!0)))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(u.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I(t,c){if(1&t&&(e.TgZ(0,"li")(1,"p"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"a",5),e.O4$(),e.TgZ(6,"svg",6),e._UZ(7,"path",7)(8,"path",8),e.qZA()()()),2&t){const n=c.$implicit;e.xp6(2),e.HOy("",n.name," ",n.lastName,", ",e.xi3(3,5,n.reservation.startDate,"yyyy/MM/dd hh:mm a")," - ",e.xi3(4,8,n.reservation.endDate,"yyyy/MM/dd hh:mm a"),""),e.xp6(3),e.MGl("routerLink","/reservation/detail/",n.reservation._id,"")}}const A=[{path:"create/:hotelId/:roomId",component:F},{path:"check",component:(()=>{class t{constructor(){this.fb=(0,e.f3M)(i.qu),this.checkService=(0,e.f3M)(Z),this.form=this.fb.group({email:["",[i.kI.email,i.kI.required]]})}check(){this.form.invalid?this.form.markAllAsTouched():this.checkService.checkReservation(this.form.value).subscribe({next:m=>{}})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-check"]],decls:9,vars:2,consts:[[1,"content-container"],[3,"formGroup","ngSubmit"],["label","Correo electr\xf3nico","formControlName","email"],["type","submit",1,"primary-button"],[4,"ngFor","ngForOf"],[3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","width","24"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"]],template:function(n,m){1&n&&(e.TgZ(0,"section",0)(1,"h1"),e._uU(2,"Consulta tu reserva"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return m.check()}),e._UZ(4,"c-email-input",2),e.TgZ(5,"button",3),e._uU(6," Consultar "),e.qZA()(),e.TgZ(7,"ul"),e.YNc(8,I,9,11,"li",4),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",m.form),e.xp6(5),e.Q6J("ngForOf",m.checkService.reservations()))},dependencies:[r.sg,d.rH,i._Y,i.JJ,i.JL,i.sg,i.u,g.G,r.uU],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:1rem}form[_ngcontent-%COMP%]   c-email-input[_ngcontent-%COMP%]{flex:1 1 auto}ul[_ngcontent-%COMP%]{list-style:none;margin-top:2rem}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;max-width:700px;margin:0 auto}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--primary)}"]}),t})()},{path:"detail/:id",component:l(164).J}];let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(A),d.Bz]}),t})();var J=l(8524);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.ez,D,i.UX,J.m]}),t})()},4929:(b,C,l)=>{l.d(C,{c:()=>f});var r=l(4946),d=l(95),e=l(9098),i=l(6814);let s=(()=>{class p{constructor(o,a){this._el=o,this._control=a,this.allowDecimals=!1}onInputChange(o){const a=this._getCharCode(o);if(a){if(32===a)return void this._control?.control?.setValue(this._el.nativeElement.value.trim());if(a>=48&&a<=57||this.allowDecimals&&46===a)return;let g=this._el.nativeElement.value;g=g.slice(0,g.length-1),this._control?.control?.setValue(g)}}_getCharCode(o){return o.data?.charCodeAt(o.data.length-1)}}return p.\u0275fac=function(o){return new(o||p)(r.Y36(r.SBq),r.Y36(d.a5))},p.\u0275dir=r.lG2({type:p,selectors:[["","OnlyNumbers",""]],hostBindings:function(o,a){1&o&&r.NdJ("input",function(v){return a.onInputChange(v)})},inputs:{allowDecimals:"allowDecimals"}}),p})();function u(p,h){if(1&p&&(r.TgZ(0,"p",4),r._uU(1),r.qZA()),2&p){const o=r.oxw();r.xp6(1),r.hij(" ",o.formHelper.getControlErrors(o.controlInstance)," ")}}let f=(()=>{class p{constructor(o,a,g){this.formHelper=o,this._fb=a,this._destroyRef=g,this.onChange=v=>v,this.onTouch=()=>{},this.onValidatorChange=()=>{},this.id="",this.label="",this.allowDecimals=!1,this._subscriptions=[],this.controlInstance=null,this.form=this._initializeForm(),this._subscribeToValueChanges(),this._destroyRef.onDestroy(()=>{this._subscriptions.forEach(v=>v.unsubscribe())})}writeValue(o){null!==o&&(this.form.setValue(o),this.onChange(o))}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouch=o}setDisabledState(o){o?this.form.disable():this.form.enable()}validate(o){return this.controlInstance=o,null}registerOnValidatorChange(o){this.onValidatorChange=o}_initializeForm(){return this._fb.control(null,{updateOn:"change"})}_subscribeToValueChanges(){const o=this.form.valueChanges.subscribe({next:a=>{this.onValidatorChange(),this.onTouch(),this.onChange(a?a.toString():"")}});this._subscriptions.push(o)}markAsTouch(){this.controlInstance?.markAsDirty(),this.onTouch(),this.onValidatorChange()}avoidLetters(o){const a=o.clipboardData?.getData("text")||"";if(a&&a.match(/[a-zA-Z]+/))return o.target.value="",this.form.reset(),o.preventDefault(),void o.stopPropagation()}}return p.\u0275fac=function(o){return new(o||p)(r.Y36(e.k),r.Y36(d.qu),r.Y36(r.ktI))},p.\u0275cmp=r.Xpm({type:p,selectors:[["c-number-input"]],inputs:{id:"id",label:"label",name:"name",allowDecimals:"allowDecimals"},features:[r._Bn([{provide:d.JU,useExisting:(0,r.Gpc)(()=>p),multi:!0},{provide:d.Cf,useExisting:(0,r.Gpc)(()=>p),multi:!0}])],decls:5,vars:9,consts:[[1,"input-container"],[1,"input-label"],["type","number","OnlyNumbers","","autocomplete","off",1,"input",3,"formControl","name","allowDecimals","blur","paste"],["class","input-error",4,"ngIf"],[1,"input-error"]],template:function(o,a){1&o&&(r.TgZ(0,"div",0)(1,"label",1),r._uU(2),r.qZA(),r.TgZ(3,"input",2),r.NdJ("blur",function(){return a.markAsTouch()})("paste",function(v){return a.avoidLetters(v)}),r.qZA(),r.YNc(4,u,2,1,"p",3),r.qZA()),2&o&&(r.ekj("error",null!==a.controlInstance&&a.formHelper.checkControlErrors(a.controlInstance)),r.xp6(1),r.uIk("for",a.id?a.id:null),r.xp6(1),r.Oqu(a.label),r.xp6(1),r.s9C("name",a.name?a.name:null),r.Q6J("formControl",a.form)("allowDecimals",a.allowDecimals),r.uIk("id",a.id?a.id:null),r.xp6(1),r.Q6J("ngIf",null!==a.controlInstance&&a.formHelper.checkControlErrors(a.controlInstance)))},dependencies:[i.O5,d.Fj,d.wV,d.JJ,d.oH,s],styles:[".input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.input-container[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:.9rem}.input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background:var(--bg);border:none;padding:.4rem .6rem;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom:1px solid var(--primary);color:var(--text);border-radius:.3rem;transition:border .3s ease}.input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus{outline:none;border-radius:.3rem;border:1px solid var(--primary)}.input-container.error[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{color:var(--error)}.input-container.error[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border:1px solid var(--error)}.input-container.error[_ngcontent-%COMP%]   .input-error[_ngcontent-%COMP%]{font-size:.9rem;color:var(--error)}"]}),p})()},9098:(b,C,l)=>{l.d(C,{k:()=>d});var r=l(4946);let d=(()=>{class e{checkFormErrors(s,u){const f=s.get(u);return f?.touched&&f.invalid}getFormErrors(s,u){const f=s.get(u)?.errors;return this._errorsDicc(f)}checkControlErrors(s){return s.invalid&&s.touched}getControlErrors(s){return this._errorsDicc(s.errors)}_errorsDicc(s){if(s?.required)return"Este campo es requerido";if(s?.email)return"No cumple con un formato de correo v\xe1lido";if(s?.maxlength){const{requiredLength:u,actualLength:f}=s.maxlength;return`Longitud m\xe1xima permitida ${u}, longitud actual ${f}`}if(s?.minlength){const{requiredLength:u,actualLength:f}=s.minlength;return`Longitud m\xednima permitida ${u}, longitud actual ${f}`}if(s?.invalidPasswordFormat)return"No cumple con el formato requerido: al menos una letra may\xfascula, al menos una letra min\xfascula, al menos un d\xedgito, sin espacios en blanco, m\xednimo 7 caracteres y m\xe1ximo 10.";if(s?.passwordNotMatch)return"Las contrase\xf1as no coinciden";if(s?.pattern)return"No cumple con el formato requerido";if(s?.max){const{actual:u,max:f}=s.max;return`El valor m\xe1ximo permitido es ${f}, valor actual ${u}`}if(s?.min){const{actual:u,min:f}=s.min;return`El valor m\xednimo permitido es ${f}, valor actual ${u}`}return""}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5516:(b,C,l)=>{l.d(C,{N:()=>r});const r={API:"https://technical-test-back.azurewebsites.net/"}}}]);